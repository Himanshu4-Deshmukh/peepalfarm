"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{2019:function(e,i,t){t.d(i,{F3:function(){return ec},Hf:function(){return $},Iq:function(){return eg.I}});var n=t(52322),r=t(2784),s=t(5632),a=t(74193),o=t(29221),l=t(23687),d=t(13980),c=t.n(d),g=t(6812),h=t(63955),m=t(6130),u=t(22486),p=t(92689),x=t(40667),f=t(94165),w=t(50701),b=t(72697);let j=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;margin:",";"],e=>e.theme.spacing(14,6)),y=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-1"})(["display:flex;flex-direction:column;align-items:center;text-align:center;width:100%;max-width:650px;padding:",";border-radius:35px;margin-bottom:",";background-color:",";"],e=>e.theme.spacing(0,6),e=>e.theme.spacing(8),e=>e.theme.colors.background.lightest),v=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-2"})(["margin-bottom:",";margin-top:",";"],e=>e.theme.spacing(7),e=>e.theme.spacing(12)),P=b.ZP.form.withConfig({componentId:"sc-ebfea7b7-3"})(["text-align:left;display:flex;flex-direction:column;align-items:center;height:100%;width:100%;max-width:512px;> div{width:inherit;}"]),k=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-4"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:",";margin-bottom:",";max-width:336px;"],e=>e.theme.spacing(8),e=>e.theme.spacing(12)),q=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-5"})(["padding-bottom:24px;"]),I=b.ZP.div.withConfig({componentId:"sc-ebfea7b7-6"})(["margin-top:",";a{color:",";}"],e=>e.theme.spacing(6),e=>e.theme.colors.secondary.chia);var C=t(57522);let R=b.ZP.div.withConfig({componentId:"sc-f4257823-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;background:white;width:100%;max-width:650px;border-radius:35px;padding:",";"],e=>e.theme.spacing(8,6)),S=b.ZP.h2.withConfig({componentId:"sc-f4257823-1"})(["",";margin-top:",";font-weight:normal;"],e=>e.theme.typography.heading2,e=>e.theme.spacing(8)),E=b.ZP.p.withConfig({componentId:"sc-f4257823-2"})(["margin-top:",";margin-bottom:",";"],e=>e.theme.spacing(1),e=>e.theme.spacing(6)),Z=b.ZP.div.withConfig({componentId:"sc-f4257823-3"})(["width:100%;max-width:336px;"]),T=e=>{let{heading:i,subheading:t,img:r,getStartedUrl:s,getStartedText:a}=e;return(0,n.jsxs)(R,{children:[(0,n.jsx)(C.t,{src:r.src,alt:r.alt,height:87,width:110}),(0,n.jsx)(S,{children:i}),(0,n.jsx)(E,{children:t}),(0,n.jsx)(Z,{children:(0,n.jsx)(m.Qj,{href:s,variant:"spinach",verticalPadding:4,fullWidth:!0,children:a})})]})};T.displayName="NewToOllie",T.propTypes={heading:c().string.isRequired,subheading:c().string.isRequired,img:c().shape({src:c().oneOfType([c().string,c().object]).isRequired,alt:c().string.isRequired}).isRequired,getStartedText:c().string.isRequired,getStartedUrl:c().string.isRequired};let L=()=>({type:"Login Page View"});var N=t(65413);let _=N.Ry().shape({email:N.Z_().trim().required("Email is required").email("Invalid email address"),password:N.Z_().trim().required("Password is required")}),U=e=>{let{heading:i,labelEmail:t,labelPassword:s,onSubmit:a,placeholderEmail:o,placeholderPassword:l,labelLogin:d,forgotPasswordUrl:c,forgotPasswordLabel:b,newToOllie:C}=e,{control:R,handleSubmit:S,reset:E,formState:{isSubmitting:Z,isSubmitted:N}}=(0,h.cI)({defaultValues:{email:"",password:""},resolver:(0,g.X)(_),mode:"onTouched"}),U=Z||N,O=(0,f.Av)();return(0,r.useEffect)(()=>{O.tag(L())},[O]),(0,n.jsxs)(j,{children:[(0,n.jsxs)(y,{children:[(0,n.jsx)(v,{children:(0,n.jsx)(u.X,{headingText:i,headingLevel:"h2",typography:"heading2",backgroundColor:"background.lightest"})}),(0,n.jsxs)(P,{onSubmit:S(async e=>{let i=await a(e);w.fE.ifError(i,()=>{setTimeout(()=>{E(e,{keepIsSubmitted:!1})})})}),children:[(0,n.jsx)(q,{children:(0,n.jsx)(h.Qr,{control:R,name:"email",render:e=>{var i;let{field:r,fieldState:s}=e;return(0,n.jsx)(p.I,{...r,labelText:t,status:s.error?"error":null,error:(null===(i=s.error)||void 0===i?void 0:i.message)||"",placeholder:o||""})}})}),(0,n.jsx)(q,{children:(0,n.jsx)(h.Qr,{control:R,name:"password",render:e=>{var i;let{field:t,fieldState:r}=e;return(0,n.jsx)(p.I,{...t,type:"password",status:r.error?"error":null,error:(null===(i=r.error)||void 0===i?void 0:i.message)||"",labelText:s,placeholder:l||""})}})}),(0,n.jsxs)(k,{children:[(0,n.jsx)(m.zx,{type:"submit",fullWidth:!0,disabled:U,isLoading:U,children:d}),(0,n.jsx)(I,{children:(0,n.jsx)(x.Aw,{href:c,children:b})})]})]})]}),(0,n.jsx)(T,{...C})]})};U.displayName="Login",U.propTypes={onSubmit:c().func.isRequired,heading:c().string.isRequired,labelEmail:c().string.isRequired,labelPassword:c().string.isRequired,labelLogin:c().string.isRequired,forgotPasswordUrl:c().string.isRequired,forgotPasswordLabel:c().string.isRequired,placeholderEmail:c().string,placeholderPassword:c().string,newToOllie:c().shape({subheading:c().string.isRequired,img:c().object.isRequired,heading:c().string.isRequired,getStartedText:c().string.isRequired,getStartedUrl:c().string.isRequired})};var O=t(6286),z=t(76898),F=t(64579),V=t(50270);let A=()=>({type:"Login Submitted"}),X=()=>({type:"Login Successful"}),H={heading:"Log in",labelEmail:"Email address",labelPassword:"Password",labelLogin:"Log in",placeholderEmail:"yourname@email.com",forgotPasswordUrl:"/auth/forgot-password/",forgotPasswordLabel:"Forgot Password?"},Q={heading:"New to Ollie?",subheading:"Get started by setting up an account now.",img:{src:{src:"/_next/static/media/new-ollie-box.3758afd2.svg",height:110,width:110,blurWidth:0,blurHeight:0},alt:"New to Ollie?"},getStartedUrl:"/onboarding/",getStartedText:"Get Started"},W=b.ZP.main.withConfig({componentId:"sc-9563fe8b-0"})(["min-height:100vh;background:",";"],e=>e.theme.colors.background.base),$=()=>{let{isActive:e,getCustomer:i}=(0,z.Vq)(),{showToast:t}=(0,V.pm)(),{login:d,service:c}=(0,w.kP)(),g=(0,f.Av)(),h=(0,s.useRouter)(),{query:{next:m}}=h,u=()=>{h.push("/onboarding/"),t({status:"info",message:"Complete the quiz and checkout to finish creating your account"})},p=(null==m?void 0:m.includes("/account/account"))?"/account/":m;{let e=new URL(window.location.href).hostname;new RegExp(/^(http(s):\/\/.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/).test(p)&&!p.includes(e)&&(p=void 0)}let x=async e=>{let n="".concat(window.location.origin).concat(null!=p?p:"/account/");g.tag(A());let r=await w.fE.callAsync(async()=>await d(e.email,e.password));return w.fE.match(r,{success:async()=>{g.tag(X()),"lead"===(await i(c.user.id)).data.status?u():h.push(n)},error:{tooManyFailedLogin:()=>{t({status:"error",headline:"Login Failed",message:"Too many failed login attempts. Please try again in 10 minutes"})},client:()=>{t({status:"error",headline:"Login Failed",message:"Please check your email & password and try again."})}}}),r};return((0,r.useEffect)(()=>{(null==m?void 0:m.includes("/account/account"))&&g.error(Error("next url has value with repeated account"))},[m,g]),e)?(0,n.jsx)(F.l,{to:null!=p?p:"/account/"}):(0,n.jsxs)(W,{children:[(0,n.jsx)(l.UP,{leftSegment:(0,n.jsx)(l.Yy,{links:a.nE}),topSegment:(0,n.jsx)(l.dz,{}),rightSegment:(0,n.jsx)(l.rJ,{}),centerSegment:(0,n.jsx)(l.wP,{links:a.nE}),logoUrl:"/",logoSrText:"Ollie logo",variant:"white"}),(0,n.jsx)(U,{...H,newToOllie:Q,onSubmit:x}),(0,n.jsx)(o.$,{...O.lo})]})};$.displayName="LoginContainer";var M=t(97729),G=t.n(M),K=t(61526),Y=t(29056),D=t.n(Y),J=t(36238);let B=N.Ry().shape({email:N.Z_().trim().required("Email is required").email("Invalid email address"),captchaToken:N.Z_().required()}),ee=b.ZP.div.withConfig({componentId:"sc-727d07f6-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;"]),ei=b.ZP.div.withConfig({componentId:"sc-727d07f6-1"})(["display:flex;flex-direction:column;align-items:center;text-align:center;width:100%;max-width:650px;padding:",";border-radius:35px;margin-bottom:",";background-color:",";"],e=>e.theme.spacing(0,6),e=>e.theme.spacing(8),e=>e.theme.colors.background.lightest),et=b.ZP.p.withConfig({componentId:"sc-727d07f6-2"})(["width:100%;display:flex;align-items:center;justify-content:center;margin:",";"],e=>e.theme.spacing(3,0,7)),en=b.ZP.form.withConfig({componentId:"sc-727d07f6-3"})(["text-align:left;display:flex;flex-direction:column;align-items:center;height:100%;width:100%;max-width:512px;> div{width:inherit;}"]),er=b.ZP.div.withConfig({componentId:"sc-727d07f6-4"})(["display:flex;margin-top:",";justify-content:center;align-items:center;"],e=>e.theme.spacing(3)),es=b.ZP.div.withConfig({componentId:"sc-727d07f6-5"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;margin-top:",";margin-bottom:",";max-width:336px;> div{width:100%;}> button{width:100%;}"],e=>e.theme.spacing(8),e=>e.theme.spacing(12)),ea=b.ZP.div.withConfig({componentId:"sc-727d07f6-6"})(["margin-bottom:",";margin-top:",";"],e=>e.theme.spacing(7),e=>e.theme.spacing(12)),eo=b.ZP.div.withConfig({componentId:"sc-727d07f6-7"})(["padding-bottom:24px;"]),el=e=>{let{siteKey:i,heading:t,labelEmail:r,labelSendLink:s,onSubmit:a}=e,{control:o,handleSubmit:l,formState:d,setValue:c}=(0,h.cI)({defaultValues:{email:"",captchaToken:""},resolver:(0,g.X)(B),mode:"onTouched"});return(0,n.jsx)(ee,{children:(0,n.jsx)(ei,{children:(0,n.jsxs)(en,{onSubmit:l(a),children:[(0,n.jsx)(ea,{children:(0,n.jsx)(J.X,{headingText:t,headingLevel:"h2",typography:"heading2",position:"center",backgroundColor:"background.lightest"})}),(0,n.jsx)(et,{children:"We'll send you instructions for a new password!"}),(0,n.jsx)(eo,{children:(0,n.jsx)(h.Qr,{control:o,name:"email",render:e=>{var i;let{field:t,fieldState:s}=e;return(0,n.jsx)(J.I,{...t,labelText:r,status:s.error?"error":null,error:(null===(i=s.error)||void 0===i?void 0:i.message)||""})}})}),(0,n.jsx)(eo,{children:(0,n.jsx)(er,{children:(0,n.jsx)(D(),{elementID:"forgotCaptcha",render:"explicit",onloadCallback:()=>{},sitekey:i,verifyCallback:e=>{c("captchaToken",e,{shouldValidate:!0})},expiredCallback:()=>{c("captchaToken","",{shouldValidate:!0})}})})}),(0,n.jsx)(es,{children:(0,n.jsx)(m.zx,{type:"submit",disabled:!d.isValid,children:s})})]})})})};el.displayName="PasswordReset",el.propTypes={siteKey:c().string.isRequired,heading:c().string.isRequired,labelEmail:c().string.isRequired,labelSendLink:c().string.isRequired,onSubmit:c().func.isRequired};let ed=b.ZP.div.withConfig({componentId:"sc-9c88a15c-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;background-color:",";padding:56px 24px;"],e=>e.theme.colors.background.base),ec=e=>{let{sitekey:i}=e,{forgotPassword:t}=(0,z.ON)(),{showToast:r}=(0,V.pm)(),s=async e=>{let{email:i,captchaToken:n}=e,s=await t(i,n);w.fE.match(s,{success:()=>{r({status:"success",message:V.H$,headline:V.gH})},error:{server:()=>{r({status:"error",message:K.Ho,headline:"Error Message"})},client:()=>{var e,i;r({status:"error",message:(null===(i=s.error)||void 0===i?void 0:null===(e=i.original.response.data)||void 0===e?void 0:e.detail)||K.c9,headline:"Error Message"})}}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G(),{children:(0,n.jsx)("script",{src:"https://www.google.com/recaptcha/api.js?render=explicit",defer:!0})}),(0,n.jsx)(l.UP,{leftSegment:(0,n.jsx)(l.Yy,{links:a.nE}),topSegment:(0,n.jsx)(l.dz,{}),centerSegment:(0,n.jsx)(l.wP,{links:a.nE}),rightSegment:(0,n.jsx)(l.iP,{}),logoUrl:"/",logoSrText:"Ollie logo",variant:"white"}),(0,n.jsx)(ed,{children:(0,n.jsx)(el,{siteKey:i,heading:"Password Reset",labelEmail:"Email address",labelSendLink:"Send me a link",onSubmit:s})}),(0,n.jsx)(o.$,{...O.lo})]})};ec.displayName="ForgotPasswordContainer",ec.propTypes={sitekey:c().string.isRequired};var eg=t(96352)},36238:function(e,i,t){t.d(i,{I:function(){return r.I},X:function(){return n.X}});var n=t(22486),r=t(92689)}}]);
//# sourceMappingURL=2019-58321ffe8ddc588a.js.map